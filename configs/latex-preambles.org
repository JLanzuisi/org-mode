#+TITLE: Preámbulos de LaTeX
#+SUBTITLE: Una configuración que usa las clases KOMA-Script y LuaLaTeX
#+AUTHOR: Jhonny Lanzuisi
#+TAGS: :latex:preamble:
#+PROPERTY: header-args :eval never :exports code :noweb tangle
#+SETUPFILE: /home/jhonny/git/org-mode/style.css.org
#+LATEX_HEADER: \asignatura{Tipografía en TeX}
# LICENSE: See license notice bellow

#+BEGIN_SRC latex :exports none
%----README----
% This TeX file was automatically generated by GNU Emacs's Org Mode.
% For better documentation refer to the corresponding Org file, 
% which you can find in the sources specified bellow.
% Do keep in mind that this file undergoes little to none manual revision.
%----LICENSE---
% Copyright 2021 Jhonny Lanzuisi (jalb97@gmail.com)
% More source files at github.com/JLanzuisi
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <https://www.gnu.org/licenses/>.
%--------------
#+END_SRC

Este archivo explica mi configuración de LaTeX.

En LaTeX solo me han hecho falta dos tipos de documentos,
los que usan como base la clase =scrartcl=  y los que usan la clase =scrbook=.
Como ambos comparten partes del código,
es pues sensato que ambos preámbulos sean descritos en este archivo.

Todos los preambulos que se generan de este archivo
pueden encontrarse de forma íntegra al final del documento,
en caso de que se quiera hacer referencia al código directamente.

* Configuraciones varias de TeX

#+NAME:misc-tex-config
#+BEGIN_SRC latex
% This block configures some misc plain TeX options
\hfuzz1pc
\overfullrule=2cm
#+END_SRC

* Configuración de idioma

#+NAME:language
#+BEGIN_SRC latex
% Language. Spanish for most texts,
% english when needed. The csquotes packages is
% usefull for quotes.
\usepackage{polyglossia}
\setdefaultlanguage{spanish}
\PolyglossiaSetup{spanish}{indentfirst=false}
%\setdefaultlanguage{english}
\usepackage{csquotes}
#+END_SRC

* Dimensiones de la página

#+NAME:page-size-article
#+BEGIN_SRC latex
% Page layout
\KOMAoptions{
paper = letter,
BCOR = 0mm,
twoside = false,
pagesize = luatex,
fontsize = {11},
DIV = calc,
}
#+END_SRC

* Tipografías (texto y matemáticas)

** Tipografías compartidas
  :PROPERTIES:
  :header-args: :noweb-ref fonts-common :eval never :exports code
  :END:

#+BEGIN_SRC latex
% Load amsmath family of packages,
% and extra goodies.
% The operators are not used too much, but
% it's nice to have them.
\usepackage{mathtools}
\DeclareMathOperator{\Rea}{Re}
\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\car}{car}
\DeclareMathOperator{\traz}{tr}
\DeclareMathOperator{\gen}{gen}
\DeclareMathOperator{\mcm}{mcm}
#+END_SRC

#+BEGIN_SRC latex
% This package loads fontspec,
% so only one usepackage is needed.
\usepackage{unicode-math}
#+END_SRC

#+BEGIN_SRC latex
% Latin modern fonts for serif and sans,
% and Hack (Dejavu sans mono derivative)
% for monospaced.
\setmainfont[SmallCapsFont={* Caps},SmallCapsFeatures={LetterSpace=5}]{Latin Modern Roman}
\defaultfontfeatures{Scale=MatchLowercase}
\setsansfont{Latin Modern Sans}
\setmonofont{TeX Gyre Cursor}
\newfontfamily{\basker}{BaskervilleF}
#+END_SRC

#+BEGIN_SRC latex
% Only one space after periods
\frenchspacing
#+END_SRC


#+BEGIN_SRC latex
% More symbols and better spacing than
% Latin modern Math.
\setmathfont{New Computer Modern Math}
#+END_SRC

* Paquetes varios

** Paquetes compartidos
  :PROPERTIES:
  :header-args: :noweb-ref packages-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
% For inserting images
\PassOptionsToPackage{final}{graphicx}
% Colors and color names
\PassOptionsToPackage{dvipsnames}{xcolor}
#+END_SRC

#+BEGIN_SRC latex
% Cancel allows to simbolize cancelling terms in math,
% its sometimes useful to have.
% Booktabs allows for better tables.
% Pdfpages gives the option to insert a pdf,
% really useful if I want an image to be scalable,
% I can then make a pdf of a vector graphic for example.
% Metalogo just gives the corrent typesetting for logos like LuaTeX.
\usepackage
{
	xcolor,
	graphicx,
	cancel,
	booktabs,
	pdfpages,
	metalogo
}
#+END_SRC

* Referencias y bibliografía
  :PROPERTIES:
  :header-args: :noweb-ref bib-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
% Make bibliography more compact, no indents.
\KOMAoption{toc}{flat}
#+END_SRC

#+BEGIN_SRC latex
% Biblatex and numeric style.
% The backref option enables back references,
% which I find nice to have.
\usepackage
[
backend=biber,
backref=true,
citestyle=numeric-comp,
bibstyle=numeric-comp,
sorting=ynt
]
{biblatex}
\addbibresource{/home/jhonny/git/Misc-LaTeX-files/bib/general.bib}
#+END_SRC

#+BEGIN_SRC latex
% Hyperlinks and their formatting
\usepackage{url} 
\usepackage{hyperref} 
\definecolor{Carmine}{HTML}{960018}
\newcommand{\linkcolor}{Black}
\hypersetup
{
colorlinks=true,
linkcolor=\linkcolor,
urlcolor=\linkcolor,
citecolor=\linkcolor
}
\usepackage[spanish,nameinlink]{cleveref} 
#+END_SRC

* Listas
  :PROPERTIES:
  :header-args: :noweb-ref lists-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
% List have no indent, and the numbers are in the right margin.
\usepackage{enumitem} 
\setlist[description]{font=\normalfont,leftmargin=\parindent}
\setlist[itemize]{label={\small\textbullet}}
#+END_SRC

* Página de título en los artículos
  :PROPERTIES:
  :header-args: :noweb-ref article-maketitle  :eval never :exports code
  :END:

#+BEGIN_SRC latex
% Font style and size for title
\setkomafont{title}{\basker}
% Font style for the subject
\setkomafont{subject}{\normalfont\scshape\large}
% Font style for subtitle
\setkomafont{subtitle}{\normalfont\upshape}
#+END_SRC

* Bloques de código
  :PROPERTIES:
  :header-args: :noweb-ref code-listings-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
\usepackage[final]{listings} 
\lstset
{
numbers=left, numberstyle=\tiny\rmfamily, stepnumber=2, numbersep=5pt, 
basicstyle=\ttfamily, 
stringstyle=\ttfamily,
commentstyle=\itshape,
emphstyle=\scshape,
keywordstyle=\scshape,
breaklines=true,
postbreak=\mbox{$\hookrightarrow$\enspace},
%columns=flexible
}
#+END_SRC

* Leyendas para figuras y tablas
  :PROPERTIES:
  :header-args: :noweb-ref captions-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
\usepackage{caption} 
\captionsetup
{
font={rm},
justification=raggedright,
singlelinecheck=false,
skip=3pt
}
#+END_SRC

* Títulos de secciones
  
** Artículos
  :PROPERTIES:
  :header-args: :noweb-ref headings-article  :eval never :exports code
  :END:

#+BEGIN_SRC latex
\RedeclareSectionCommand[
  afterindent=false,
  beforeskip=1.5\baselineskip,
  afterskip=.5\baselineskip]{section}
\setkomafont{section}{\normalfont\LARGE}
\RedeclareSectionCommand[
  afterindent=false,
  beforeskip=1\baselineskip,
  afterskip=1\baselineskip
]{subsection}
\setkomafont{subsection}{\normalfont\bfseries\small}
#+END_SRC

** Libros

* Lista de contenidos
** Artículo
  :PROPERTIES:
  :header-args: :noweb-ref toc-article  :eval never :exports code
  :END:

#+BEGIN_SRC latex
\setkomafont{sectionentry}{\normalfont\sffamily\large}
%\setkomafont{subsectionentry}{\normalfont}
#+END_SRC
* Encabezados y pies de página

** Artículos
  :PROPERTIES:
  :header-args: :noweb-ref hdr-article  :eval never :exports code
  :END:

#+BEGIN_SRC latex
% Line for header
\KOMAoption{headsepline}{true}
% Section headings in header
\pagestyle{headings}
#+END_SRC

* Entornos de teoremas
  :PROPERTIES:
  :header-args: :noweb-ref theorems-common  :eval never :exports code
  :END:

#+BEGIN_SRC latex
\usepackage[thmmarks]{ntheorem}
#+END_SRC

#+BEGIN_SRC latex
\theoremstyle{plain}
\theorempreskip{\medskipamount}
\theorempostskip{\medskipamount}
\theorembodyfont{\upshape}
\theoremseparator{.}
{
\theoremheaderfont{\itshape}
\newtheorem{definition}{Definición}
}
{
\theoremheaderfont{\scshape}
\newtheorem{theorem}{Teorema}
}
#+END_SRC

* Los preambulos completos

Esta sección reproduce los archivos
cuyas partes han sido descritas y explicadas anteriormente.

** Articulos

#+NAME:article-preamble
#+BEGIN_SRC latex :noweb yes :tangle ~/git/LaTeX-University/preamble-article.tex 
<<misc-tex-config>>

<<language>>

<<page-size-article>>

<<fonts-common>>

<<packages-common>>

<<bib-common>>

<<lists-common>>

<<article-maketitle>>

<<code-listings-common>>
<<captions-common>>

<<headings-article>>

<<toc-article>>

<<hdr-article>>

<<theorems-common>>
#+END_SRC

** Libros
